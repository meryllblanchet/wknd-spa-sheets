(this["webpackJsonpwknd-spa-sheets"]=this["webpackJsonpwknd-spa-sheets"]||[]).push([[0],{27:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(28),i=n.n(a),s=n(10),o=n(3),j=n(7),u=n(1),l=function(e){var t=e.errorMessage;return Object(u.jsx)("div",{className:"error",children:Object(u.jsx)("span",{className:"error-message",children:"Error: ".concat(t)})})},d=n.p+"static/media/icon-loading.2c27a19f.svg",m=function(){return Object(u.jsx)("div",{className:"loading",children:Object(u.jsx)("img",{src:d,alt:"Loading..."})})},b=(n(39),n(5)),O=n(8),p=n(6);function x(e,t){var n=Object(c.useState)(null),r=Object(p.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),o=Object(p.a)(s,2),j=o[0],u=o[1];return Object(c.useEffect)((function(){function n(){return(n=Object(O.a)(Object(b.a)().mark((function n(){var c,r,a;return Object(b.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e,t&&(c+="?sheet=".concat(t)),n.next=4,fetch(c);case 4:return r=n.sent,n.next=7,r.json();case 7:return a=n.sent,n.abrupt("return",a.data);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}(function(){return n.apply(this,arguments)})().then(i).catch((function(e){u(e),sessionStorage.removeItem("accessToken")}))}),[e,t]),{data:a,errorMessage:j}}function h(e){var t=Object(c.useMemo)((function(){return{itemID:"urn:aemconnection:".concat(null===e||void 0===e?void 0:e._path,"/jcr:content/data/master"),itemType:"reference",itemfilter:"cf"}}),[e._path]);if(!e||!e.name||!e.title)return null;var n=e.image||"/assets/adventures/".concat(e.name,".jpeg");return Object(u.jsxs)("li",Object(j.a)(Object(j.a)({className:"adventure-item",itemScope:!0},t),{},{children:[Object(u.jsx)(s.b,{to:"/adventure/".concat(e.name),children:Object(u.jsx)("img",{className:"adventure-item-image",src:n,alt:e.title,itemProp:"primaryImage",itemType:"image"})}),Object(u.jsxs)("div",{className:"adventure-item-length-price",children:[Object(u.jsx)("div",{className:"adventure-item-length",itemProp:"tripLength",itemType:"text",children:e.tripLength}),Object(u.jsxs)("div",{className:"adventure-item-price",itemProp:"price",itemType:"text",children:["$",e.price]})]}),Object(u.jsx)("div",{className:"adventure-item-title",itemProp:"title",itemType:"text",children:e.title})]}))}var f=function(){var e=x("/adventures.json"),t=e.data,n=e.errorMessage;return n?Object(u.jsx)(l,{errorMessage:n}):t?Object(u.jsx)("div",{className:"adventures",children:Object(u.jsx)("ul",{className:"adventure-items",children:t.map((function(e,t){return Object(u.jsx)(h,Object(j.a)({},e),t)}))})}):Object(u.jsx)(m,{})},v=n.p+"static/media/wknd-card.42e74d83.jpeg",g=function(){var e=Object(O.a)(Object(b.a)().mark((function e(t){var n,c,r,a,i,s;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.startsWith("local:")){e.next=11;break}return n=t.replace("local:",""),e.next=4,fetch(n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r.paths);case 11:return a="".concat("https://author-p100120-e919464.adobeaemcloud.com","/").concat(t.split(":/")[1],".model.json"),e.next=14,fetch(a);case 14:return i=e.sent,e.next=17,i.json();case 17:return s=e.sent,e.abrupt("return",s);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=e.itemID,n=e.itemProp,a=e.itemType,i=e.className,s=Object(c.useMemo)((function(){return{itemID:t,itemProp:n,itemType:a}}),[t,n,a]),o=r.a.useState({}),l=Object(p.a)(o,2),d=l[0],m=l[1];return Object(c.useEffect)((function(){t&&n&&g(t).then((function(e){return m(e)}))}),[t,n]),Object(u.jsx)("div",Object(j.a)(Object(j.a)({},s),{},{className:i,children:"richtext"===a?Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:d[n]}}):d[n]}))},y=function(e){var t=e.itemID,n=e.itemProp,a=e.itemType,i=e.className,s=Object(c.useMemo)((function(){return{itemID:t,itemProp:n,itemType:a}}),[t,n,a]),o=r.a.useState({}),l=Object(p.a)(o,2),d=l[0],m=l[1];Object(c.useEffect)((function(){t&&n&&g(t).then((function(e){return m(e)}))}),[t,n]);var b="".concat(d.type);return Object(u.jsx)(b,Object(j.a)(Object(j.a)({},s),{},{className:i,children:d.text}))},T=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("article",{className:"card",children:[Object(u.jsx)("img",{src:v,alt:"Sample"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(y,{itemID:"urn:aemconnection:/content/wknd/us/en/jcr:content/root/container/container/title",itemProp:"jcr:title",itemType:"text"}),Object(u.jsx)(y,{itemID:"urn:aemconnection:/content/wknd/us/en/magazine/western-australia/jcr:content/root/container/container/title",itemProp:"jcr:title",itemType:"text"}),Object(u.jsx)("div",{className:"card-text",children:Object(u.jsx)(N,{itemID:"urn:aemconnection:/content/wknd/us/en/magazine/ski-touring/jcr:content/root/container/container/contentfragment/par1/text",itemProp:"text",itemType:"richtext"})}),Object(u.jsx)(s.b,{to:"/magazine",children:Object(u.jsx)("button",{children:"Show More"})})]})]})})},S=n.p+"static/media/footer.2830bf6e.jpeg",P=function(){return Object(u.jsxs)("div",{className:"card",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)(y,{itemID:"urn:aemconnection:/content/wknd/us/en/about-us/jcr:content/root/container/title",itemProp:"jcr:title",itemType:"text"}),Object(u.jsx)(N,{itemID:"urn:aemconnection:/content/wknd/us/en/about-us/jcr:content/root/container/text_359993709",itemProp:"text",itemType:"richtext"}),Object(u.jsx)(N,{itemID:"urn:aemconnection:/content/wknd/us/en/faqs/jcr:content/root/container/container/text",itemProp:"text",itemType:"richtext"})]}),Object(u.jsx)("img",{src:S,alt:"footer"})]})};var M=function(){return Object(u.jsxs)("div",{className:"Home",children:[Object(u.jsx)(T,{}),Object(u.jsx)("hr",{}),Object(u.jsx)(y,{itemID:"urn:aemconnection:/content/wknd/us/en/about-us/jcr:content/root/container/title_393953656_copy",itemType:"text",itemProp:"jcr:title"}),Object(u.jsx)(f,{}),Object(u.jsx)("hr",{}),Object(u.jsx)(P,{})]})},k=n.p+"static/media/wknd-logo-dk.5fba0497.svg",_=(n(40),n.p+"static/media/icon-close.e4df2958.svg"),I=(n(27),n(11));function w(e){if(!(e=e.trim()))return"";if(e.startsWith("<p>"))return e;var t,n=e.split("\n").map((function(e){return e.trim()})),c=[],r=[],a=Object(I.a)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;i?r.push(i):(c.push(r.join("<br>")),r.length=0)}}catch(s){a.e(s)}finally{a.f()}return r.length&&c.push(r.join("<br>")),c.map((function(e){return"<p>".concat(e,"</p>")})).join("")}function D(e){return{__html:w(e)}}function E(e){var t,n=e.name,r=e.title,a=e.image,i=e.activity,s=e.adventureType,o=e.tripLength,l=e.groupSize,d=e.difficulty,m=e.description,b=e.itinerary,O=e.contributor,p=(e.references,Object(c.useMemo)((function(){return{itemID:"adventure/".concat(n),itemType:"urn:fcs:type/fragment"}}),[n]));return a=null!==(t=a)&&void 0!==t?t:"/assets/adventures/".concat(n,".jpeg"),Object(u.jsxs)("div",Object(j.a)(Object(j.a)({},p),{},{itemScope:!0,children:[Object(u.jsx)("h1",{className:"adventure-detail-title",children:r}),Object(u.jsxs)("div",{className:"adventure-detail-info",children:[Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Activity"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"activity",itemType:"text",children:i}),Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Type"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"adventureType",itemType:"text",children:s}),Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Trip Length"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"tripLength",itemType:"text",children:o}),Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Group Size"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"groupSize",itemType:"text",children:l}),Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Difficulty"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"difficulty",itemType:"text",children:d})]}),Object(u.jsxs)("div",{className:"adventure-detail-content",children:[Object(u.jsx)("img",{className:"adventure-detail-primaryimage",src:a,alt:r,itemType:"image"}),Object(u.jsx)("div",{dangerouslySetInnerHTML:D(m)}),Object(u.jsx)("h2",{children:"Itinerary"}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"adventure-detail-itinerary",dangerouslySetInnerHTML:D(b)}),Object(u.jsx)(L,Object(j.a)({},O))]})]}))}function A(){return Object(u.jsxs)("div",{className:"adventure-detail",children:[Object(u.jsx)(s.b,{className:"adventure-detail-close-button",to:"/",children:Object(u.jsx)("img",{className:"Backbutton-icon",src:_,alt:"Return"})}),Object(u.jsx)(l,{errorMessage:"Missing data, adventure could not be rendered."})]})}function L(e){if(!e)return null;var t=null;return e.pictureReference&&(t=Object(u.jsx)("img",{className:"contributor-image",src:e.pictureReference._path,alt:e.fullName})),Object(u.jsxs)("div",{className:"contributor",children:[Object(u.jsx)("hr",{className:"contributor-separator"}),t,Object(u.jsx)("h3",{className:"contributor-name",children:e.fullName}),Object(u.jsx)("h4",{className:"contributor-occupation",children:e.occupation})]})}var z=function(){var e=Object(o.o)().name,t=Object(o.m)(),n=x("/adventures.json"),c=n.data,r=n.errorMessage;if(r)return Object(u.jsx)(l,{errorMessage:r});if(!c)return Object(u.jsx)(m,{});var a=c.find((function(t){return t.name===e}));return a?Object(u.jsxs)("div",{className:"adventure-detail",children:[Object(u.jsx)("button",{className:"adventure-detail-close-button",onClick:function(){return t(-1)},children:Object(u.jsx)("img",{className:"Backbutton-icon",src:_,alt:"Return"})}),Object(u.jsx)(E,Object(j.a)(Object(j.a)({},a),{},{references:[]}))]}):Object(u.jsx)(A,{})},R=(n(41),function(e){var t=e.name,n=e.title,r=e.author,a=e.abstract,i=Object(c.useMemo)((function(){return{itemID:t,itemType:"urn:fcs:type/fragment"}}),[t]);return Object(u.jsxs)("li",{className:"article-item",children:[Object(u.jsxs)("div",Object(j.a)(Object(j.a)({itemScope:!0},i),{},{children:[Object(u.jsxs)(s.b,{to:"/magazine/".concat(t),children:[Object(u.jsx)("h3",{"data-id":"title",itemProp:"title",itemType:"text",children:n}),Object(u.jsx)("img",{className:"article-item-image",src:"/assets/articles/".concat(t,".jpeg"),alt:n,itemProp:"profilePicture",itemType:"image"})]}),Object(u.jsx)("p",{children:"By ".concat(r)})]})),Object(u.jsx)("p",{className:"article-content",dangerouslySetInnerHTML:{__html:a}})]})}),H=function(){var e=x("/articles.json"),t=e.data,n=e.errorMessage;return n?Object(u.jsx)(l,{errorMessage:n}):t?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Articles"}),Object(u.jsx)("ul",{children:t.map((function(e,t){return Object(u.jsx)(R,Object(j.a)({},e),t)}))})]}):Object(u.jsx)(m,{})},C=n(47);function B(e){return e.children.map((function(e,t){return"paragraph"===e.type?Object(u.jsx)("p",{children:B(e)},t):"heading"===e.type?(e.level,Object(u.jsx)("h1",{children:B(e)},t)):"text"===e.type?e.value:[]}))}function K(e){var t=e.name,n=e.title,r=Object(c.useMemo)((function(){return{itemID:t,itemType:"text/fragment"}}),[t]),a=function(e){var t=Object(c.useState)(null),n=Object(p.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(p.a)(i,2),o=s[0],j=s[1];return Object(c.useEffect)((function(){function t(){return(t=Object(O.a)(Object(b.a)().mark((function t(){var n,c;return Object(b.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e,".md"));case 2:if((n=t.sent).ok){t.next=5;break}return t.abrupt("return","");case 5:return t.t0=C.a,t.next=8,n.text();case 8:return t.t1=t.sent,c=(0,t.t0)(t.t1),t.abrupt("return",B(c));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().then(a).catch((function(e){j(e),sessionStorage.removeItem("accessToken")}))}),[e]),{data:r,errorMessage:o}}("/magazine/".concat(t)),i=a.data,o=a.errorMessage;return o?Object(u.jsx)(l,{errorMessage:o}):i?Object(u.jsxs)("div",Object(j.a)(Object(j.a)({itemScope:!0},r),{},{children:[Object(u.jsx)("h1",{className:"adventure-detail-title",itemProp:"title",itemType:"text",children:n}),Object(u.jsxs)("div",{className:"adventure-detail-info",children:[Object(u.jsx)(F,Object(j.a)({},e)),Object(u.jsx)(s.b,{to:"/magazine/aboutus",children:"About Us"})]}),Object(u.jsxs)("div",{className:"adventure-detail-content",children:[Object(u.jsx)("img",{className:"adventure-detail-primaryimage",src:"/assets/articles/".concat(t,".jpeg"),alt:n}),Object(u.jsx)("div",{children:i})]})]})):Object(u.jsx)(m,{})}function W(){return Object(u.jsxs)("div",{className:"adventure-detail",children:[Object(u.jsx)(s.b,{className:"adventure-detail-close-button",to:"/",children:Object(u.jsx)("img",{className:"Backbutton-icon",src:_,alt:"Return"})}),Object(u.jsx)(l,{errorMessage:"Missing data, article could not be rendered."})]})}function F(e){return Object(u.jsxs)("div",{className:"contributor",children:[Object(u.jsx)("img",{className:"contributor-image",src:"/assets/authors/".concat((t=e.author,t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")),".jpeg"),alt:e.author}),Object(u.jsx)("h3",{className:"contributor-name",children:e.author})]});var t}var U=function(){var e=Object(o.o)().name,t=Object(o.m)(),n=x("/articles.json"),c=n.data,r=n.errorMessage;if(r)return Object(u.jsx)(l,{errorMessage:r});if(!c)return Object(u.jsx)(m,{});var a=c.find((function(t){return t.name===e}));return a?Object(u.jsxs)("div",{className:"adventure-detail",children:[Object(u.jsx)("button",{className:"adventure-detail-close-button",onClick:function(){return t(-1)},children:Object(u.jsx)("img",{className:"Backbutton-icon",src:_,alt:"Return"})}),Object(u.jsx)(K,Object(j.a)({},a))]}):Object(u.jsx)(W,{})},q=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"About Us"}),Object(u.jsx)("img",{width:"100%",src:v,alt:"Sample"}),Object(u.jsx)("p",{children:"The WKND is a fictional online magazine and adventure company that focuses on outdoor activities and trips across the globe. The WKND site is designed to demonstrate functionality for Adobe Experience Manager. There is also a corresponding tutorial that walks a developer through the development. Special thanks to Lorenzo Buosi and Kilian Amendola who created the beautiful design for the WKND site. Test2"})]})},J=Object({NODE_ENV:"production",PUBLIC_URL:"/dist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_HOST_URI:"https://author-p100120-e919464.adobeaemcloud.com"}),$=J.REACT_APP_IBIZA_URL,G=J.REACT_APP_API_KEY,V=function(){var e=r.a.useState(),t=Object(p.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){fetch("".concat($,"/editing/1234/articles.html"),{headers:{"x-api-key":G}}).then((function(e){return e.text()})).then((function(e){var t=(new DOMParser).parseFromString(e,"text/html");a(t.querySelector("body").innerHTML)})).catch((function(e){console.log("Failed to fetch page: ",e)}))}),[]),n?Object(u.jsx)("div",{className:"article",dangerouslySetInnerHTML:{__html:n}}):Object(u.jsx)(m,{})},Y="https://author-p100120-e919464.adobeaemcloud.com";var Z=function(){return Object(c.useEffect)((function(){document.querySelector('meta[name="urn:auecon:aemconnection"]').setAttribute("content","aem:".concat(Y))})),Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"Home",children:[Object(u.jsxs)("header",{children:[Object(u.jsx)("img",{src:k,className:"logo",alt:"WKND Logo"}),Object(u.jsx)("hr",{})]}),Object(u.jsx)(s.a,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"/adventure/:name",element:Object(u.jsx)(z,{})}),Object(u.jsx)(o.a,{path:"/",element:Object(u.jsx)(M,{})}),Object(u.jsx)(o.a,{path:"/article",element:Object(u.jsx)(V,{})}),Object(u.jsx)(o.a,{path:"/magazine",element:Object(u.jsx)(H,{})}),Object(u.jsx)(o.a,{path:"/magazine/:name",element:Object(u.jsx)(U,{})}),Object(u.jsx)(o.a,{path:"/magazine/aboutus",element:Object(u.jsx)(q,{})})]})})]})})};n(42);i.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Z,{})}))}},[[43,1,2]]]);
//# sourceMappingURL=main.e68eead0.chunk.js.map