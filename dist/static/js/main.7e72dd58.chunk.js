(this["webpackJsonpwknd-spa-sheets"]=this["webpackJsonpwknd-spa-sheets"]||[]).push([[0],{32:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(41),i=n.n(a),s=n(9),o=n(3),l=n(6),u=n(0),d=function(e){var t=e.errorMessage;return Object(u.jsx)("div",{className:"error",children:Object(u.jsx)("span",{className:"error-message",children:"Error: ".concat(t)})})},j=n.p+"static/media/icon-loading.2c27a19f.svg",m=function(){return Object(u.jsx)("div",{className:"loading",children:Object(u.jsx)("img",{src:j,alt:"Loading..."})})},b=(n(50),n(4)),h=n(8),O=n(5),p="https://main--wknd-spa-sheets--tripodsan.hlx.page",x=p;function f(e,t){var n=Object(c.useState)(null),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),o=Object(O.a)(s,2),l=o[0],u=o[1];return Object(c.useEffect)((function(){function n(){return(n=Object(h.a)(Object(b.a)().mark((function n(){var c,r,a;return Object(b.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(c=new URL("".concat(x).concat(e))).searchParams.append("sheet",t),n.next=4,fetch(c);case 4:return r=n.sent,n.next=7,r.json();case 7:return a=n.sent,n.abrupt("return",a.data);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}(function(){return n.apply(this,arguments)})().then(i).catch((function(e){u(e),sessionStorage.removeItem("accessToken")}))}),[e,t]),{data:a,errorMessage:l}}function v(e){var t=Object(c.useMemo)((function(){return{itemID:"urn:aemconnection:".concat(null===e||void 0===e?void 0:e._path,"/jcr:content/data/master"),itemType:"reference",itemfilter:"cf"}}),[e._path]);return e&&e.name&&e.title&&e.image?Object(u.jsxs)("li",Object(l.a)(Object(l.a)({className:"adventure-item",itemScope:!0},t),{},{children:[Object(u.jsx)(s.b,{to:"/adventure/".concat(e.name),children:Object(u.jsx)("img",{className:"adventure-item-image",src:e.image,alt:e.title,itemProp:"primaryImage",itemType:"image"})}),Object(u.jsxs)("div",{className:"adventure-item-length-price",children:[Object(u.jsx)("div",{className:"adventure-item-length",itemProp:"tripLength",itemType:"text",children:e.tripLength}),Object(u.jsxs)("div",{className:"adventure-item-price",itemProp:"price",itemType:"text",children:["$",e.price]})]}),Object(u.jsx)("div",{className:"adventure-item-title",itemProp:"title",itemType:"text",children:e.title})]})):null}var g=function(){var e=f("/adventures.json","adventures"),t=e.data,n=e.errorMessage;return n?Object(u.jsx)(d,{errorMessage:n}):t?Object(u.jsx)("div",{className:"adventures",children:Object(u.jsx)("ul",{className:"adventure-items",children:t.map((function(e,t){return Object(u.jsx)(v,Object(l.a)({},e),t)}))})}):Object(u.jsx)(m,{})},y=n.p+"static/media/wknd-card.42e74d83.jpeg",N=function(){var e=Object(h.a)(Object(b.a)().mark((function e(t){var n,c,r,a,i,s;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.startsWith("local:")){e.next=11;break}return n=t.replace("local:",""),e.next=4,fetch(n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r.paths);case 11:return a="".concat("https://author-p100120-e919464.adobeaemcloud.com","/").concat(t.split(":/")[1],".model.json"),e.next=14,fetch(a);case 14:return i=e.sent,e.next=17,i.json();case 17:return s=e.sent,e.abrupt("return",s);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.itemID,n=e.itemProp,a=e.itemType,i=e.className,s=Object(c.useMemo)((function(){return{itemID:t,itemProp:n,itemType:a}}),[t,n,a]),o=r.a.useState({}),d=Object(O.a)(o,2),j=d[0],m=d[1];return Object(c.useEffect)((function(){t&&n&&N(t).then((function(e){return m(e)}))}),[t,n]),Object(u.jsx)("div",Object(l.a)(Object(l.a)({},s),{},{className:i,children:"richtext"===a?Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:j[n]}}):j[n]}))},_=function(e){var t=e.itemID,n=e.itemProp,a=e.itemType,i=e.className,s=Object(c.useMemo)((function(){return{itemID:t,itemProp:n,itemType:a}}),[t,n,a]),o=r.a.useState({}),d=Object(O.a)(o,2),j=d[0],m=d[1];Object(c.useEffect)((function(){t&&n&&N(t).then((function(e){return m(e)}))}),[t,n]);var b="".concat(j.type);return Object(u.jsx)(b,Object(l.a)(Object(l.a)({},s),{},{className:i,children:j.text}))},S=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("article",{className:"card",children:[Object(u.jsx)("img",{src:y,alt:"Sample"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(_,{itemID:"urn:aemconnection:/content/wknd/us/en/jcr:content/root/container/container/title",itemProp:"jcr:title",itemType:"text"}),Object(u.jsx)(_,{itemID:"urn:aemconnection:/content/wknd/us/en/magazine/western-australia/jcr:content/root/container/container/title",itemProp:"jcr:title",itemType:"text"}),Object(u.jsx)("div",{className:"card-text",children:Object(u.jsx)(T,{itemID:"urn:aemconnection:/content/wknd/us/en/magazine/ski-touring/jcr:content/root/container/container/contentfragment/par1/text",itemProp:"text",itemType:"richtext"})}),Object(u.jsx)(s.b,{to:"/articles",children:Object(u.jsx)("button",{children:"Show More"})})]})]})})},P=n.p+"static/media/footer.2830bf6e.jpeg",w=function(){return Object(u.jsxs)("div",{className:"card",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)(_,{itemID:"urn:aemconnection:/content/wknd/us/en/about-us/jcr:content/root/container/title",itemProp:"jcr:title",itemType:"text"}),Object(u.jsx)(T,{itemID:"urn:aemconnection:/content/wknd/us/en/about-us/jcr:content/root/container/text_359993709",itemProp:"text",itemType:"richtext"}),Object(u.jsx)(T,{itemID:"urn:aemconnection:/content/wknd/us/en/faqs/jcr:content/root/container/container/text",itemProp:"text",itemType:"richtext"})]}),Object(u.jsx)("img",{src:P,alt:"footer"})]})};var k=function(){return Object(u.jsxs)("div",{className:"Home",children:[Object(u.jsx)(s.b,{to:"/article",children:Object(u.jsx)("p",{children:"Go to Content Services Sample"})}),Object(u.jsx)(S,{}),Object(u.jsx)("hr",{}),Object(u.jsx)(_,{itemID:"urn:aemconnection:/content/wknd/us/en/about-us/jcr:content/root/container/title_393953656_copy",itemType:"text",itemProp:"jcr:title"}),Object(u.jsx)(g,{}),Object(u.jsx)("hr",{}),Object(u.jsx)(w,{})]})},I=n.p+"static/media/wknd-logo-dk.5fba0497.svg",A=(n(51),n.p+"static/media/icon-close.e4df2958.svg");n(32);function E(e){var t=e.name,n=e.title,r=e.image,a=e.activity,i=e.adventureType,s=e.tripLength,o=e.groupSize,d=e.difficulty,j=e.description,m=e.itinerary,b=e.contributor,h=(e.references,Object(c.useMemo)((function(){return{itemID:"adventure/".concat(t),itemType:"urn:fcs:type/fragment"}}),[t]));function O(e){return{__html:e}}return Object(u.jsxs)("div",Object(l.a)(Object(l.a)({},h),{},{itemScope:!0,children:[Object(u.jsx)("h1",{className:"adventure-detail-title",children:n}),Object(u.jsxs)("div",{className:"adventure-detail-info",children:[Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Activity"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"activity",itemType:"text",children:a}),Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Type"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"adventureType",itemType:"text",children:i}),Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Trip Length"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"tripLength",itemType:"text",children:s}),Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Group Size"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"groupSize",itemType:"text",children:o}),Object(u.jsx)("div",{className:"adventure-detail-info-label",children:"Difficulty"}),Object(u.jsx)("div",{className:"adventure-detail-info-description",itemProp:"difficulty",itemType:"text",children:d})]}),Object(u.jsxs)("div",{className:"adventure-detail-content",children:[Object(u.jsx)("img",{className:"adventure-detail-primaryimage",src:r,alt:n,itemType:"image"}),Object(u.jsx)("div",{dangerouslySetInnerHTML:O(j)}),Object(u.jsx)("h2",{children:"Itinerary"}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"adventure-detail-itinerary",dangerouslySetInnerHTML:O(m)}),Object(u.jsx)(R,Object(l.a)({},b))]})]}))}function M(){return Object(u.jsxs)("div",{className:"adventure-detail",children:[Object(u.jsx)(s.b,{className:"adventure-detail-close-button",to:"/",children:Object(u.jsx)("img",{className:"Backbutton-icon",src:A,alt:"Return"})}),Object(u.jsx)(d,{errorMessage:"Missing data, adventure could not be rendered."})]})}function R(e){if(!e)return null;var t=null;return e.pictureReference&&(t=Object(u.jsx)("img",{className:"contributor-image",src:e.pictureReference._path,alt:e.fullName})),Object(u.jsxs)("div",{className:"contributor",children:[Object(u.jsx)("hr",{className:"contributor-separator"}),t,Object(u.jsx)("h3",{className:"contributor-name",children:e.fullName}),Object(u.jsx)("h4",{className:"contributor-occupation",children:e.occupation})]})}var D=function(){var e=Object(o.o)().name,t=Object(o.m)(),n=f("/adventures.json","adventures"),c=n.data,r=n.errorMessage;if(r)return Object(u.jsx)(d,{errorMessage:r});if(!c)return Object(u.jsx)(m,{});var a=c.find((function(t){return t.name===e}));return a?Object(u.jsxs)("div",{className:"adventure-detail",children:[Object(u.jsx)("button",{className:"adventure-detail-close-button",onClick:function(){return t(-1)},children:Object(u.jsx)("img",{className:"Backbutton-icon",src:A,alt:"Return"})}),Object(u.jsx)(E,Object(l.a)(Object(l.a)({},a),{},{references:[]}))]}):Object(u.jsx)(M,{})},L=n(52).AEMHeadless,H=Object({NODE_ENV:"production",PUBLIC_URL:"/dist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_HOST_URI:"https://author-p100120-e919464.adobeaemcloud.com",REACT_APP_FRANKLIN_HOST_URI:"https://main--wknd-spa-sheets--tripodsan.hlx.page"}),C=H.REACT_APP_GRAPHQL_ENDPOINT,F=H.REACT_APP_HOST_URI;var K=function(e,t){var n=Object(c.useState)(null),r=Object(O.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),o=Object(O.a)(s,2),l=o[0],u=o[1];return Object(c.useEffect)((function(){!function(){var n=new L({serviceURL:F,endpoint:C});(e?n.runQuery.bind(n):n.runPersistedQuery.bind(n))(t).then((function(e){var t=e.data,n=e.errors;n&&u(function(e){return e.map((function(e){return e.message})).join(",")}(n)),t&&i(t)})).catch((function(e){u(e),sessionStorage.removeItem("accessToken")}))}()}),[e,t]),{data:a,errorMessage:l}},U=(n(78),function(e){var t=e._path,n=e.title,r=e.authorFragment,a=e.slug,i=Object(c.useMemo)((function(){return{itemID:t,itemType:"urn:fcs:type/fragment"}}),[t]);return Object(u.jsxs)("li",{className:"article-item",children:[Object(u.jsxs)("div",Object(l.a)(Object(l.a)({itemScope:!0},i),{},{children:[Object(u.jsx)(s.b,{to:"/articles/article:".concat(a),children:Object(u.jsx)("h3",{"data-id":"title",itemProp:"title",itemType:"text",children:n})}),Object(u.jsx)("img",{className:"article-item-image",src:null===r||void 0===r?void 0:r.profilePicture._path,alt:n,itemProp:"profilePicture",itemType:"image"}),Object(u.jsx)("p",{children:"By ".concat(r.firstName," ").concat(r.lastName)})]})),Object(u.jsx)("p",{className:"article-content",children:"Steep mountain sides surround us, like wise trolls from a distant timeline, weathered and worn by long-gone glaciers, green moss now covering the black rock. White sheep forage on steep grass, defying the chilling winds funneled by the deep valley. The subtle hues of the arctic circle are welcoming, comfortable on the eyes. When rare sunrays pierce through the low clouds, the scenery reveals its vibrancy, as the waves reflect a translucent cyan blue before crashing loudly onto white sand. A small but playful groundswell is building, the offshore breeze grooming playful lines down the point, making for welcoming conditions for acclimatizing to cold water and thick neoprene. Knowing it is our last surf before a few days of hard wind, we take full advantage out of every ripple the North Atlantic Ocean sends our way."})]})}),W=function(){var e=K("","wknd-shared/articles-all"),t=e.data,n=e.errorMessage;return n?Object(u.jsx)(d,{errorMessage:n}):t?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Articles"}),Object(u.jsx)("ul",{children:t.articleList.items.map((function(e,t){return Object(u.jsx)(U,Object(l.a)({},e),t)}))})]}):Object(u.jsx)(m,{})},B={header:function(e,t,n){var c;return null===(c=n[e.style])||void 0===c?void 0:c.call(n,e,t)},paragraph:function(e,t){return Object(u.jsx)("p",{children:t})},"unordered-list":function(e,t){return Object(u.jsx)("ul",{children:t})},"ordered-list":function(e,t){return Object(u.jsx)("ol",{children:t})},"list-item":function(e,t){return Object(u.jsx)("li",{children:t})},table:function(e,t){return Object(u.jsx)("table",{children:t})},"table-body":function(e,t){return Object(u.jsx)("tbody",{children:t})},"table-row":function(e,t){return Object(u.jsx)("tr",{children:t})},"table-data":function(e,t){return Object(u.jsx)("td",{children:t})},link:function(e){return Object(u.jsx)("a",{href:e.data.href,target:e.data.target,children:e.value})},text:function(e,t){return function(e,t){var n,c;if((null===(n=e.format)||void 0===n||null===(c=n.variants)||void 0===c?void 0:c.length)>0)return e.format.variants.reduce((function(e,n){var c,r;return null!==(c=null===(r=t[n])||void 0===r?void 0:r.call(t,e))&&void 0!==c?c:null}),e.value);return e.value}(e,t)},reference:function(e){return function(e){var t,n=null===(t=e.data)||void 0===t?void 0:t.mimetype;if(n&&n.startsWith("image"))return Object(u.jsx)("img",{src:e.data.path,alt:"reference"});return null}(e)}},z={bold:function(e){return Object(u.jsx)("b",{children:e})},italic:function(e){return Object(u.jsx)("i",{children:e})},underline:function(e){return Object(u.jsx)("u",{children:e})}},q={h1:function(e,t){return Object(u.jsx)("h1",{children:t})},h2:function(e,t){return Object(u.jsx)("h2",{children:t})},h3:function(e,t){return Object(u.jsx)("h3",{children:t})}};function G(e,t){return e&&t?e.map((function(e,n){return r=function(e,t){var n,c,r=t.nodeMap,a=t.textFormat,i=t.headerStyle;if(!e||!t)return null;var s,o,l=e.content?G(e.content,t):null;return"header"===e.nodeType?null===(s=r[e.nodeType])||void 0===s?void 0:s.call(r,e,l,i):"text"===e.nodeType?null===(o=r[e.nodeType])||void 0===o?void 0:o.call(r,e,a):null!==(n=null===(c=r[e.nodeType])||void 0===c?void 0:c.call(r,e,l))&&void 0!==n?n:null}(e,t),a=n,Object(c.isValidElement)(r)&&null===r.key?Object(c.cloneElement)(r,{key:a}):r;var r,a})):null}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G(e,{nodeMap:Object(l.a)(Object(l.a)({},B),t.nodeMap),textFormat:Object(l.a)(Object(l.a)({},z),t.textFormat),headerStyle:Object(l.a)(Object(l.a)({},q),t.headerStyle)})}function V(e){var t=e._path,n=e.title,r=e.featuredImage,a=e.slug,i=e.main,o=e.authorFragment,d=Object(c.useMemo)((function(){return{itemID:t,itemType:"text/fragment"}}),[t]);return Object(u.jsxs)("div",Object(l.a)(Object(l.a)({itemScope:!0},d),{},{children:[Object(u.jsx)("h1",{className:"adventure-detail-title",itemProp:"title",itemType:"text",children:n}),Object(u.jsxs)("div",{className:"adventure-detail-info",children:[Object(u.jsx)(Y,Object(l.a)({},o)),Object(u.jsx)(s.b,{to:"/articles/article:".concat(a,"/aboutus"),children:"About Us"})]}),Object(u.jsxs)("div",{className:"adventure-detail-content",children:[Object(u.jsx)("img",{className:"adventure-detail-primaryimage",src:r._path,alt:n}),Object(u.jsx)("div",{children:Q(i.json)})]})]}))}function J(){return Object(u.jsxs)("div",{className:"adventure-detail",children:[Object(u.jsx)(s.b,{className:"adventure-detail-close-button",to:"/",children:Object(u.jsx)("img",{className:"Backbutton-icon",src:A,alt:"Return"})}),Object(u.jsx)(d,{errorMessage:"Missing data, article could not be rendered."})]})}function Y(e){if(!e)return null;var t=null;return e.profilePicture&&(t=Object(u.jsx)("img",{className:"contributor-image",src:e.profilePicture._path,alt:e.firstName})),Object(u.jsxs)("div",{className:"contributor",children:[t,Object(u.jsxs)("h3",{className:"contributor-name",children:[e.firstName," ",e.lastName]})]})}var Z=function(){var e=Object(o.o)().slug,t=Object(o.m)(),n=e.substring(1),c="wknd-shared/article-by-slug;slug=".concat(n),r=K("",c),a=r.data,i=r.errorMessage;if(i)return Object(u.jsx)(d,{errorMessage:i});if(!a)return Object(u.jsx)(m,{});var s=function(e){if(e&&e.articleList&&e.articleList.items&&1===e.articleList.items.length)return e.articleList.items[0];return}(a);return s?Object(u.jsxs)("div",{className:"adventure-detail",children:[Object(u.jsx)("button",{className:"adventure-detail-close-button",onClick:function(){return t(-1)},children:Object(u.jsx)("img",{className:"Backbutton-icon",src:A,alt:"Return"})}),Object(u.jsx)(V,Object(l.a)(Object(l.a)({},s),{},{slug:n}))]}):Object(u.jsx)(J,{})},$=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"About Us"}),Object(u.jsx)("img",{width:"100%",src:y,alt:"Sample"}),Object(u.jsx)("p",{children:"The WKND is a fictional online magazine and adventure company that focuses on outdoor activities and trips across the globe. The WKND site is designed to demonstrate functionality for Adobe Experience Manager. There is also a corresponding tutorial that walks a developer through the development. Special thanks to Lorenzo Buosi and Kilian Amendola who created the beautiful design for the WKND site. Test2"})]})},X=Object({NODE_ENV:"production",PUBLIC_URL:"/dist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_HOST_URI:"https://author-p100120-e919464.adobeaemcloud.com",REACT_APP_FRANKLIN_HOST_URI:"https://main--wknd-spa-sheets--tripodsan.hlx.page"}),ee=X.REACT_APP_IBIZA_URL,te=X.REACT_APP_API_KEY,ne=function(){var e=r.a.useState(),t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){fetch("".concat(ee,"/editing/1234/articles.html"),{headers:{"x-api-key":te}}).then((function(e){return e.text()})).then((function(e){var t=(new DOMParser).parseFromString(e,"text/html");a(t.querySelector("body").innerHTML)})).catch((function(e){console.log("Failed to fetch page: ",e)}))}),[]),n?Object(u.jsx)("div",{className:"article",dangerouslySetInnerHTML:{__html:n}}):Object(u.jsx)(m,{})},ce="https://author-p100120-e919464.adobeaemcloud.com";var re=function(){return Object(c.useEffect)((function(){document.querySelector('meta[name="urn:auecon:aemconnection"]').setAttribute("content","aem:".concat(ce))})),Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"Home",children:[Object(u.jsxs)("header",{children:[Object(u.jsx)("img",{src:I,className:"logo",alt:"WKND Logo"}),Object(u.jsx)("hr",{})]}),Object(u.jsx)(s.a,{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"/adventure/:name",element:Object(u.jsx)(D,{})}),Object(u.jsx)(o.a,{path:"/",element:Object(u.jsx)(k,{})}),Object(u.jsx)(o.a,{path:"/article",element:Object(u.jsx)(ne,{})}),Object(u.jsx)(o.a,{path:"/articles",element:Object(u.jsx)(W,{})}),Object(u.jsx)(o.a,{path:"/articles/article:slug",element:Object(u.jsx)(Z,{})}),Object(u.jsx)(o.a,{path:"/articles/article:slug/aboutus",element:Object(u.jsx)($,{})})]})})]})})};n(79);i.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(re,{})}))}},[[80,1,2]]]);
//# sourceMappingURL=main.7e72dd58.chunk.js.map